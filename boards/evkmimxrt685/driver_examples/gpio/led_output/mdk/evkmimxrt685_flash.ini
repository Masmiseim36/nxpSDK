
FUNC void FlashInit (void) {
     //Configure QSPI pin
    _WDWORD(0x400040ac, 0x00000146);
    _WDWORD(0x400040b0, 0x00000146);
    _WDWORD(0x400040b4, 0x00000146);
    _WDWORD(0x400040b8, 0x00000146);
    _WDWORD(0x400040f4, 0x00000145);
    _WDWORD(0x40004144, 0x00000146);
    _WDWORD(0x40004148, 0x00000146);
    _WDWORD(0x4000414c, 0x00000146);
    _WDWORD(0x40004158, 0x00000146);
    _WDWORD(0x4000415c, 0x00000146);

    
    _WDWORD(0x40033800, 0); //CACHE64_CTRL0->CCR = 0;
    _WDWORD(0x4003301C, 0); //CACHE64_POLSEL0->POLSEL = 0;
    _WDWORD(0x40002630, 0x10000);//SYSCTL0->PDRUNCFG0_CLR = SYSCTL0_PDRUNCFG0_FFRO_PD_MASK;
    _WDWORD(0x40002634, 0xC);//Flexspi SRAM APD/PPD
    _WDWORD(0x40002638, 0xFF);//PDRUNCFG2,3 CLR
    _WDWORD(0x4000263C, 0xFF);

    _WDWORD(0x40001430, 0x3);    // MAINCLKSELA
    _WDWORD(0x40001434, 0);      // MAINCLKSELB

    _WDWORD(0x40001620, 0x3);      // CLKCTL0->FLEXSPIFCLKSEL = 3

    _WDWORD(0x40001040, 0x10000);   // CLKCTL0->PSCCTL0_SET = CLKCTL0_PSCCTL0_SET_FLEXSPI_OTFAD_MASK;
    _WDWORD(0x40000070, 0x10000);   // RSTCTL0->PRSTCTL0_CLR = RSTCTL0_PRSTCTL0_CLR_FLEXSPI_OTFAD_MASK;
    
    _WDWORD(0x40134000, 0xFFFFA000); // FLEXSPI->MCR0
    _WDWORD(0x40134004, 0xFFFFFFFF); // FLEXSPI->MCR0
    _WDWORD(0x40134008, 0x200001F7); // FLEXSPI->MCR2
    _WDWORD(0x4013400C, 0x00000078); // FLEXSPI->AHBCR
    _WDWORD(0x40134020, 0x80000000); // FELXSPI->AHBRXBUF0CR0
    _WDWORD(0x40134024, 0x80000000); // FELXSPI->AHBRXBUF0CR1
    _WDWORD(0x40134028, 0x80000000); // FELXSPI->AHBRXBUF0CR2
    _WDWORD(0x4013402C, 0x80000000); // FELXSPI->AHBRXBUF0CR3
    _WDWORD(0x40134030, 0x80000000); // FELXSPI->AHBRXBUF0CR4
    _WDWORD(0x40134034, 0x80000000); // FELXSPI->AHBRXBUF0CR5
    _WDWORD(0x40134038, 0x80000000); // FELXSPI->AHBRXBUF0CR6
    _WDWORD(0x4013403C, 0x80070010); // FELXSPI->AHBRXBUF0CR7
    _WDWORD(0x40134060, 0x0); // FELXSPI->FLASHA1CR0
    _WDWORD(0x40134064, 0x0); // FELXSPI->FLASHA2CR0
    _WDWORD(0x40134068, 0x10000); // FELXSPI->FLASHB1CR0
    _WDWORD(0x4013406C, 0x0); // FELXSPI->FLASHB2CR0
    _WDWORD(0x40134094, 0xc3); // FELXSPI->FLSHCR4
    _WDWORD(0x401340A4, 0x10000); // FELXSPI->IPCR1
    _WDWORD(0x401340BC, 0x1C); // FELXSPI->IPTXFCR
    _WDWORD(0x401340C0, 0x100); // FELXSPI->DLLCRA
    _WDWORD(0x401340C4, 0x100); // FELXSPI->DLLCRB
    _WDWORD(0x401340E0, 0x3); // FELXSPI->STS0
    _WDWORD(0x401340E4, 0x0); // FELXSPI->STS1
    _WDWORD(0x401340E8, 0x0); // FELXSPI->STS2
        
    // Config look up table
    _WDWORD(0x40134018, 0x5AF05AF0);
    _WDWORD(0x4013401C, 0x2);
    _WDWORD(0x40134200, 0x071307EC);
    _WDWORD(0x40134204, 0x33140B20);
    _WDWORD(0x40134208, 0x00002704);
    _WDWORD(0x40134018, 0x5AF05AF0);
    _WDWORD(0x4013401C, 0x1);
    
    _WDWORD(0x40134000, _RDWORD(0x40134000) | 0x1); // Software Reset

}
FUNC void Setup (void) {
    FlashInit();
  SP = _RDWORD(0x08001000);          // Setup Stack Pointer
  PC = _RDWORD(0x08001004);          // Setup Program Counter
  _WDWORD(0xE000ED08, 0x08001000);   // Setup Vector Table Offset Register
}

LOAD %L INCREMENTAL                  // Download

Setup();                             // Setup for Running

//g, main
