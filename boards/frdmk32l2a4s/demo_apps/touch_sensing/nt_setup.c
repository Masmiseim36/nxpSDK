/*
 * Copyright 2013 - 2016, Freescale Semiconductor, Inc.
 * Copyright 2016-2021 NXP
 * All rights reserved.
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */
/*
Static configuration c file for the NXP Touch Library
generated by the NXP Touch GUI Tool
*/
#include "nt_setup.h"
#include "board.h"

const struct nt_keydetector_safa keydec_safa = {
    .signal_filter              = {4},
    .base_avrg.n2_order         = 12,
    .non_activity_avrg.n2_order = 15,
    .entry_event_cnt            = 10,
    .signal_to_noise_ratio      = 8,
    .deadband_cnt               = 10,
    .min_noise_limit            = 100,
};
const struct nt_keydetector_usafa nt_keydetector_usafa_El_7 = {
    .signal_filter.coef1        = 2,
    .base_avrg.n2_order         = 12,
    .non_activity_avrg.n2_order = 15,
    .entry_event_cnt            = 4,
    .deadband_cnt               = 4,
    .signal_to_noise_ratio      = 3,
    .min_noise_limit            = 60,
    .dc_track_enabled           = 1,
    .dc_track_cnt               = 100,
};
const struct nt_electrode El_1 = {
    .pin_input               = BOARD_TSI_ELECTRODE_1,
    .keydetector_interface   = &nt_keydetector_safa_interface,
    .keydetector_params.safa = &keydec_safa,
};

const struct nt_electrode El_2 = {
    .pin_input               = BOARD_TSI_ELECTRODE_2,
    .keydetector_interface   = &nt_keydetector_safa_interface,
    .keydetector_params.safa = &keydec_safa,
};
const tsi_config_t tsi_hw_config = {
    .prescaler = kTSI_ElecOscPrescaler_64div,
    .extchrg   = kTSI_ExtOscChargeCurrent_2uA,
    .refchrg   = kTSI_RefOscChargeCurrent_4uA,
    .nscn      = kTSI_ConsecutiveScansNumber_4time,
    .mode      = kTSI_AnalogModeSel_Capacitive,
    .dvolt     = kTSI_OscVolRailsOption_0,
    .thresh    = 0,
    .thresl    = 0,
    .filter    = kTSI_FilterBits_0,
};
const struct nt_electrode *const ASlider_1_controls[]        = {&El_1, &El_2, NULL};
const struct nt_control_aslider nt_control_aslider_ASlider_1 = {
    .range         = 100,
    .insensitivity = 3,
};
const struct nt_control ASlider_1 = {
    .electrodes             = &ASlider_1_controls[0],
    .control_params.aslider = &nt_control_aslider_ASlider_1,
    .interface              = &nt_control_aslider_interface,
};
const struct nt_electrode *const nt_tsi_module_electrodes[] = {&El_1, &El_2, NULL};
const struct nt_module nt_tsi_module                        = {
    .interface  = &nt_module_tsi_interface,
    .wtrmark_hi = 65535,
    .wtrmark_lo = 0,
    .config     = (void *)&tsi_hw_config,
    .instance   = 0,
    .electrodes = &nt_tsi_module_electrodes[0],
};
const struct nt_control *const System_0_controls[] = {&ASlider_1, NULL};
const struct nt_module *const System_0_modules[]   = {&nt_tsi_module, NULL};
const struct nt_system System_0                    = {
    .time_period = 5,
    .init_time   = 50,
    .controls    = &System_0_controls[0],
    .modules     = &System_0_modules[0],
};
void nt_enable(void)
{
    nt_electrode_enable(&El_1, 0);
    nt_electrode_enable(&El_2, 0);
    nt_control_enable(&ASlider_1);
}
