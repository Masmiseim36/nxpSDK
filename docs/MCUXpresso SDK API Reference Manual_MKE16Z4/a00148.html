<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>MCUXpresso SDK API Reference Manual: System Clock Generator (SCG)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MCUXpresso SDK API Reference Manual
   &#160;<span id="projectnumber">Rev 2.12.0</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00148.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">System Clock Generator (SCG)<div class="ingroups"><a class="el" href="a00035.html">Clock Driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>The MCUXpresso SDK provides a peripheral driver for the System Clock Generator (SCG) module of MCUXpresso SDK devices.</p>
<h1><a class="anchor" id="SCGFunc"></a>
Function description</h1>
<p>The SCG module contains the system PLL (SPLL), a slow internal reference clock (SIRC), a fast internal reference clock (FIRC), a low power FLL, and the system oscillator clock (SOSC). They can be configured separately as the source of MCU system clocks. Accordingly, the SCG driver provides these functions:</p>
<ul>
<li>MCU system clock configuration.</li>
<li>SCG SOSC configuration.</li>
<li>SCG SIRC configuration.</li>
<li>SCG FIRC configuration.</li>
<li>SCG SPLL configuration.</li>
<li>SCG LPFLL configuration.</li>
</ul>
<h2><a class="anchor" id="SCGSYSClk"></a>
MCU System Clock</h2>
<p>MCU system clock configurations include the clock source selection and the clock dividers. The configurations for VLPR, RUN, and HSRUN modes are set separately using the <a class="el" href="a00035.html#ga611aaea0a65a1168f10ee73f1baa7bf6" title="Sets the system clock configuration for VLPR mode. ">CLOCK_SetVlprModeSysClkConfig()</a>, <a class="el" href="a00035.html#ga3a889b0840fef60a1347875fd2489394" title="Sets the system clock configuration for RUN mode. ">CLOCK_SetRunModeSysClkConfig()</a>, and the CLOCK_SetHsrunModeSysClkConfig() functions to configure the MCU system clock.<br/>
 The current MCU system clock configuration can be obtained with the function <a class="el" href="a00035.html#ga9d47683b6a51571ee6cd94b3323ed498" title="Gets the system clock configuration in the current power mode. ">CLOCK_GetCurSysClkConfig()</a>. The current MCU system clock frequency can be obtained with the <a class="el" href="a00035.html#ga94f6fb910ce02dd3fd4578798a466009" title="Gets the SCG system clock frequency. ">CLOCK_GetSysClkFreq()</a> function.</p>
<h2><a class="anchor" id="SCGSOSC"></a>
SCG System OSC Clock</h2>
<p>The functions <a class="el" href="a00035.html#gadad7d22a4b5473070b927474dfd3026d" title="Initializes the SCG system OSC. ">CLOCK_InitSysOsc()</a>/CLOCK_DeinitSysOsc() are used for the SOSC clock initialization. The function CLOCK_InitSysOsc disables the SOSC internally and re-configures it. As a result, ensure that the SOSC is not used while calling these functions.<br/>
 The SOSC clock can be used directly as the MCU system clock source. The SOSCDIV1_CLK, SOSCDIV2_CLK, and SOSCDIV3_CLK can be used as the peripheral clock source. The clocks frequencies can be obtained by functions <a class="el" href="a00035.html#gaa93043820107f4ba614bc7a10f0d1a8b" title="Gets the SCG system OSC clock frequency (SYSOSC). ">CLOCK_GetSysOscFreq()</a> and <a class="el" href="a00035.html#gaef4c59246ade20bb5849e988380f864b" title="Gets the SCG asynchronous clock frequency from the system OSC. ">CLOCK_GetSysOscAsyncFreq()</a>.<br/>
 To configure the SOSC monitor mode, use the function <a class="el" href="a00035.html#ga808a7f69b4e070d8a3a492c871fd222d" title="Sets the system OSC monitor mode. ">CLOCK_SetSysOscMonitorMode()</a>. The clock error status can be received and cleared with the <a class="el" href="a00035.html#ga1a12699eb7ad6c2eb40dbe266e5ad0a6" title="Checks whether the system OSC clock error occurs. ">CLOCK_IsSysOscErr()</a> and <a class="el" href="a00035.html#gad439c806a2e05474e2932f0b02c118a0" title="Clears the system OSC clock error. ">CLOCK_ClearSysOscErr()</a> functions.<br/>
 </p>
<h2><a class="anchor" id="SCGSIRC"></a>
SCG Slow IRC Clock</h2>
<p>The functions <a class="el" href="a00035.html#gaca0cbc095b2ff1884ad563f4b56cfd8c" title="Initializes the SCG slow IRC clock. ">CLOCK_InitSirc()</a>/CLOCK_DeinitSirc() are used for the SIRC clock initialization. The function CLOCK_InitSirc disables the SIRC internally and re-configures it. Ensure that the SIRC is not used while calling these functions.<br/>
 The SIRC clock can be used directly as the MCU system clock source. The SIRCDIV1_CLK, SIRCDIV2_CLK, and SIRCDIV3_CLK can be used as the peripheral clock source. The clocks frequencies can be received with functions <a class="el" href="a00035.html#ga50913149c6e3c058ad6112a5a0148eba" title="Gets the SCG SIRC clock frequency. ">CLOCK_GetSircFreq()</a> and <a class="el" href="a00035.html#gaa05efef2e3f0f5c5577fae3343ed5ab1" title="Gets the SCG asynchronous clock frequency from the SIRC. ">CLOCK_GetSircAsyncFreq()</a>.<br/>
 </p>
<h2><a class="anchor" id="SCGFIRC"></a>
SCG Fast IRC Clock</h2>
<p>The functions <a class="el" href="a00035.html#gacc46e2dc2f851f4319c397e0ac1cc45d" title="Initializes the SCG fast IRC clock. ">CLOCK_InitFirc()</a>/CLOCK_DeinitFirc() are used for the FIRC clock initialization. The function CLOCK_InitFirc disables the FIRC internally and re-configures it. Ensure that the FIRC is not used while calling these functions.<br/>
 The FIRC clock can be used directly as the MCU system clock source. The FIRCDIV1_CLK, FIRCDIV2_CLK, and FIRCDIV3_CLK can be used as the peripheral clock source. The clocks frequencies could be obtained by functions <a class="el" href="a00035.html#ga60391a676244e92af64ce26e5a81c8bc" title="Gets the SCG FIRC clock frequency. ">CLOCK_GetFircFreq()</a> and <a class="el" href="a00035.html#gad7e01f477e2dee18a67a3d03f9558498" title="Gets the SCG asynchronous clock frequency from the FIRC. ">CLOCK_GetFircAsyncFreq()</a>.<br/>
 The FIRC can be trimmed by the external clock. See the Section "Typical use case" to enable the FIRC trim.</p>
<h2><a class="anchor" id="SCGLPFLL"></a>
SCG Low Power FLL Clock</h2>
<p>The functions <a class="el" href="a00035.html#ga74c0e68b40b3e8e725c3a92062fb7143" title="Initializes the SCG LPFLL clock. ">CLOCK_InitLpFll()</a>/CLOCK_DeinitLpFll() are used for the LPFLL clock initialization. The function CLOCK_InitLpFll disables the LPFLL internally and re-configures it. Ensure that the LPFLL is not used while calling these functions.<br/>
 The LPFLL clock can be used directly as the MCU system clock source. The LPFLLDIV1_CLK, LPFLLDIV2_CLK, and LPFLLDIV3_CLK can be used as the peripheral clock source. The clocks frequencies could be obtained by functions <a class="el" href="a00035.html#gabf12ee43cc80cb82dcafe2a0378542ea" title="Gets the SCG LPFLL clock frequency. ">CLOCK_GetLpFllFreq()</a> and <a class="el" href="a00035.html#ga00bf96d86bb9cf3409a3f53e659f1c70" title="Gets the SCG asynchronous clock frequency from the LPFLL. ">CLOCK_GetLpFllAsyncFreq()</a>.<br/>
 The LPFLL can be trimmed by the external clock, specific the trimConfig in <a class="el" href="a00035.html#a00232" title="SCG low power FLL configuration. ">scg_lpfll_config_t</a> to enable the clock trim.</p>
<h2><a class="anchor" id="SCGSPLL"></a>
SCG System PLL Clock</h2>
<p>The functions CLOCK_InitSysPll()/CLOCK_DeinitSysPll() are used for the SPLL clock initialization. The function CLOCK_InitSysPll disables the SPLL internally and re-configures it. Ensure that the SPLL is not used while calling these functions.<br/>
 To generate the desired SPLL frequency, PREDIV and MULT value must be set properly while initializing the SPLL. The function CLOCK_GetSysPllMultDiv() calculates the PREDIV and MULT. Passing in the reference clock frequency and the desired output frequency, the function returns the PREDIV and MULT which generate the frequency closest to the desired frequency.</p>
<p>Because the SPLL is based on the FIRC or SOSC, the FIRC or SOSC must be enabled first before the SPLL initialization. Also, when re-configuring the FIRC or SOSC, be careful with the SPLL.<br/>
 The SPLL clock can be used directly as the MCU system clock source. The SPLLDIV1_CLK, SPLLDIV2_CLK, and SPLLDIV3_CLK can be used as the peripheral clock source. The clocks frequencies can be obtained with functions CLOCK_GetSysPllFreq() and CLOCK_GetSysPllAsyncFreq().<br/>
 To configure the SPLL monitor mode, use the function CLOCK_SetSysPllMonitorMode(). The clock error status can be received and cleared by the CLOCK_IsSysPllErr() and CLOCK_ClearSysPllErr().<br/>
 </p>
<h2><a class="anchor" id="SCGCLKVld"></a>
SCG clock valid check</h2>
<p>The functions such as the <a class="el" href="a00035.html#ga8167c85eb231f45a1a3a59a804736b42" title="Checks whether the FIRC clock is valid. ">CLOCK_IsFircValid()</a> are used to check whether a specific clock is valid or not. See "Typical use case" for details.<br/>
 The clocks are valid after the initialization functions such as the <a class="el" href="a00035.html#gacc46e2dc2f851f4319c397e0ac1cc45d" title="Initializes the SCG fast IRC clock. ">CLOCK_InitFirc()</a>. As a result, it is not necessary to call the <a class="el" href="a00035.html#ga8167c85eb231f45a1a3a59a804736b42" title="Checks whether the FIRC clock is valid. ">CLOCK_IsFircValid()</a> after the <a class="el" href="a00035.html#gacc46e2dc2f851f4319c397e0ac1cc45d" title="Initializes the SCG fast IRC clock. ">CLOCK_InitFirc()</a>.</p>
<h1><a class="anchor" id="SCGUSECse"></a>
Typical use case</h1>
<h2><a class="anchor" id="SCGFIRCTrim"></a>
FIRC clock trim</h2>
<p>During the FIRC initialization, applications can choose whether to enable trim or not.</p>
<ol type="1">
<li>Trim is not enabled. Refer to the driver examples codes located at &lt;SDK_ROOT&gt;/boards/&lt;BOARD&gt;/driver_examples/scg</li>
<li>Trim is enabled. Refer to the driver examples codes located at &lt;SDK_ROOT&gt;/boards/&lt;BOARD&gt;/driver_examples/scg </li>
</ol>
<h2><a class="anchor" id="SCGSPLLInit"></a>
SPLL initialization</h2>
<p>The following code shows how to set up the SCG SPLL. The SPLL uses the SOSC as a reference clock. Refer to the driver examples codes located at &lt;SDK_ROOT&gt;/boards/&lt;BOARD&gt;/driver_examples/scg </p>
<h2><a class="anchor" id="SCGSYSCLKCfg"></a>
System clock configuration</h2>
<p>While changing the system clock configuration, the actual system clock does not change until the target clock source is valid. Ensure that the clock source is valid before using it. The functions such as <a class="el" href="a00035.html#ga2b53ef4d5658466652086845807ceed1" title="Checks whether the SIRC clock is valid. ">CLOCK_IsSircValid()</a> are used for this purpose.<br/>
 The SCG has a dedicated system clock configuration registers for VLPR, RUN, and HSRUN modes. During the power mode change, the system clock configuration may change too. In this case, check whether the clock source is valid during the power mode change.<br/>
 In the following example, the SIRC is used as the system clock source in VLPR mode, the FIRC is used as a system clock source in RUN mode, and the SPLL is used as a system clock source in HSRUN mode.<br/>
 The example work flow:</p>
<ol type="1">
<li>SIRC, FIRC, and SPLL are all enabled in RUN mode.</li>
<li>MCU enters VLPR mode. In VLPR mode, FIRC, and SPLL are disabled automatically.</li>
<li>MCU enters RUN mode. Wait for the FIRC to become valid.</li>
<li>MCU enters HSRUN mode. In step 3, the SPLL is already enabled, but may not be valid. Wait for it to become valid when entering HSRUN mode. Refer to the driver examples codes located at &lt;SDK_ROOT&gt;/boards/&lt;BOARD&gt;/driver_examples/scg </li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">&copy; 2016 NXP Semiconductors. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
