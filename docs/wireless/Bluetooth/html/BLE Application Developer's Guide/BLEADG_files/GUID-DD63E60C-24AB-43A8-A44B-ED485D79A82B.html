<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="OTAP client–server interactions"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3F4AE941-E856-427B-8399-E0257FCCAC1B.html"/>
<meta name="prodname" content="MC56F825x"/>
<meta name="version" content="1"/>
<meta name="release" content="0"/>
<meta name="modification" content="0"/>
<meta name="DC.Creator" content=""/>
<meta name="DC.Publisher" content="NXP Semiconductors"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-DD63E60C-24AB-43A8-A44B-ED485D79A82B"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>OTAP client–server interactions</title>
</head>
<body id="GUID-DD63E60C-24AB-43A8-A44B-ED485D79A82B">


    <h1 class="title topictitle1">OTAP client–server interactions</h1>

    <div class="body">
        <p class="p">The interactions between the OTAP Server and OTAP Client start immediately after the
            connection, discovery of the OTAP Service characteristics and writing of the OTAP
            Control Point CCC Descriptor by the OTAP Server.</p>

        <p class="p">The first command sent could be a New Image Notification sent by the OTAP Server to the
            OTAP Client or a New Image Info Request sent by the OTAP Client. The OTAP Server can
            respond with a New Image Info response if it has a new image for the device which sent
            the request (this can be determined from the <em class="ph i">ImageVerison</em> parameter). The best
            strategy depends on application requirements.</p>

        <p class="p">After the OTAP Client has determined that the OTAP Sever has a newer image it can start
            downloading the image. This is done by Sending Image Block Request commands to retrieve
            parts of the image file. The OATP Server answers to these requests with one or more
            Image Chunk Commands via the requested transfer method or with an Error Notification if
            there are improper parameters in the Image Block Request. The OTAP Clients makes as many
            Image Block Requests as it is necessary to transfer the entire image file.</p>

        <p class="p">The OTAP Client decides how often Image Block Request Commands are sent and can even stop
            a block transfer which is in progress via the Stop Image Transfer Command. The OTAP
            Client is in complete control of the image download process and can stop it and restart
            it at any time based on its resources and application requirements.</p>

        <p class="p">A typical BLE OTAP Image Transfer scenario is shown in the message sequence chart
            below.</p>

        <div class="fig fignone" id="GUID-DD63E60C-24AB-43A8-A44B-ED485D79A82B__FIG_Y2G_TRM_CY"><span class="figcap">Figure 1. Typical BLE OTAP Image Transfer Scenario Message Sequence Chart</span>
            
            <img class="image" id="GUID-DD63E60C-24AB-43A8-A44B-ED485D79A82B__IMAGE_WM5_WRM_CY" src="GUID-E1957214-94BA-4619-857D-F85497FDA5A9-high.png"/>
        </div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-3F4AE941-E856-427B-8399-E0257FCCAC1B.html">BLE OTAP protocol</a></div>
</div>
</div>

</body>
</html>