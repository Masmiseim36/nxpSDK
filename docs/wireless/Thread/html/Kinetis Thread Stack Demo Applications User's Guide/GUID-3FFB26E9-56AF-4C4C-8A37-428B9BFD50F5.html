<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Running the scenario"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D803F6A2-06C7-472F-9CB6-7756E46630EB.html"/>
<meta name="prodname" content="MC56F825x"/>
<meta name="version" content="1"/>
<meta name="release" content="0"/>
<meta name="modification" content="0"/>
<meta name="DC.Publisher" content="NXP Semiconductors"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Running the scenario</title>
</head>
<body id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5">


	<h1 class="title topictitle1">Running the scenario</h1>

	<div class="body">
		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_XPY_CMF_3Z">
			<li class="li">On All Nodes, factory reset the devices device using the shell by entering:</li>

		</ul>

		<p class="p"><strong class="ph b">$ factoryreset</strong></p>

		<p class="p">Note: when using the USB-KW24D512, the device needs to be re-inserted and re-opened in PuTTY or the terminal application.</p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_SRY_CMF_3Z">
			<li class="li">On <strong class="ph b">Node A</strong> shell, to create a new Thread network enter:</li>

		</ul>

		<p class="p"><strong class="ph b">$ thr create</strong></p>

		<p class="p">Note the status messages in the shell indicating the network parameters. Note a Commissioner instance also starts on Node A</p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_MTY_CMF_3Z">
			<li class="li">On <strong class="ph b">Node B</strong> shell initiate joining with the default PSKd (<strong class="ph b"><em class="ph i">THREAD</em></strong>):</li>

		</ul>

		<p class="p"><strong class="ph b">$ thr join</strong></p>

		<p class="p">Note the status messages in the shell indicating the joining results. </p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_HVY_CMF_3Z">
			<li class="li">On <strong class="ph b">Node A</strong>, enter the ifconfig command to view IP address information<strong class="ph b">:</strong></li>

		</ul>

		<p class="p"><strong class="ph b">$ ifconfig</strong></p>

		<p class="p"><strong class="ph b">Interface 1: 6LoWPAN</strong></p>

		<p class="p"><strong class="ph b"> Link local address (LL64): fe80::54a0:abf9:c49:8520 </strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML64): fd16:e46c:f0e7::f846:14ef:a586:d5d2</strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML16): fd16:e46c:f0e7::ff:fe00:0 </strong></p>

		<p class="p"><strong class="ph b"> Link local all Thread Nodes(MCast): ff32:40:fd16:e46c:f0e7::01</strong></p>

		<p class="p"><strong class="ph b"> Realm local all Thread Nodes(MCast): ff33:40:fd16:e46c:f0e7::01</strong></p>

		<p class="p"><strong class="ph b"> Interface 0: Loopback</strong></p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_CXY_CMF_3Z">
			<li class="li">On <strong class="ph b">Node B</strong>, enter the ifconfig command to view IP address information<strong class="ph b">:</strong></li>

		</ul>

		<p class="p"><strong class="ph b">$ ifconfig</strong></p>

		<p class="p"><strong class="ph b">Interface 1: 6LoWPAN</strong></p>

		<p class="p"><strong class="ph b"> Link local address (LL64): fe80::bc85:e92e:fa9e:a10d </strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML64): fd16:e46c:f0e7::f438:9c8b:c09f:49f0 </strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML16): fd16:e46c:f0e7::ff:fe00:400 </strong></p>

		<p class="p"><strong class="ph b"> Link local all Thread Nodes(MCast): ff32:40:fd16:e46c:f0e7::01</strong></p>

		<p class="p"><strong class="ph b"> Realm local all Thread Nodes(MCast): ff33:40:fd16:e46c:f0e7::01</strong></p>

		<p class="p"><strong class="ph b"> Interface 0: Loopback</strong></p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_XYY_CMF_3Z">
			<li class="li">Use the addresses noted via ifconfig command to send CoAP LED control messages. </li>

		</ul>

		<p class="p">For instance on <strong class="ph b">Node A</strong> enter the command to send to Node B an RGB LED command (each r, g, b flags take values from 000 to 255):</p>

		<p class="p"><strong class="ph b">$ coap CON POST fd16:e46c:f0e7::f438:9c8b:c09f:49f0 /led rgb r255 g000 b255</strong></p>

		<p class="p">coap rsp from fd16:e46c:f0e7::f438:9c8b:c09f:49f0 ACK</p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_S1Z_CMF_3Z">
			<li class="li">If Node B has an RGB LED, it turns purple because of the red and blue settings being maximized.</li>

			<li class="li">On <strong class="ph b">Node A</strong> to send to Node B an RGB LED off command enter:</li>

		</ul>

		<p class="p"><strong class="ph b">$ coap CON POST fd16:e46c:f0e7::f438:9c8b:c09f:49f0 /led off</strong></p>

		<p class="p"><strong class="ph b">coap rsp from fd16:e46c:f0e7::f438:9c8b:c09f:49f0 ACK</strong></p>

		<ul class="ul" id="GUID-3FFB26E9-56AF-4C4C-8A37-428B9BFD50F5__UL_MCZ_CMF_3Z">
			<li class="li">On <strong class="ph b">Node B</strong> press “Report Temperature” button switch on Node B <span class="ph">(SW2 on FRDM-KW24D512</span>)</li>

			<li class="li">On <strong class="ph b">Node A</strong> note how the indication of the temperature (in degrees Celsius) is displayed in the shell as coming from the IP address of Node B:</li>

		</ul>

		<p class="p">Temp:27.37 From IPv6 Address: fd16:e46c:f0e7::f438:9c8b:c09f:49f0</p>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-D803F6A2-06C7-472F-9CB6-7756E46630EB.html">Sending application data CoAP messages using the shell</a></div>
</div>
</div>

</body>
</html>