<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Running the scenario"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D4D7209B-AA8D-4DE3-84FB-C14DA0517ED9.html"/>
<meta name="prodname" content="MC56F825x"/>
<meta name="version" content="1"/>
<meta name="release" content="0"/>
<meta name="modification" content="0"/>
<meta name="DC.Publisher" content="NXP Semiconductors"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Running the scenario</title>
</head>
<body id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E">


	<h1 class="title topictitle1">Running the scenario</h1>

	<div class="body">
		<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_GGC_QB3_3Z">
			<li class="li">For <strong class="ph b">Node A</strong>, in order to access RNDIS connect USB interface cables to the PC on:<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_WGC_QB3_3Z">
				<li class="li">the OpenSDA / OpenLink USB for KW41Z, or</li>

				<li class="li">the direct-to-KW24 USB </li>

			</ul>
</li>

			<li class="li">For <strong class="ph b">Node A</strong>, a KINETIS RNDIS device is detected by the Host PC operating system on the KW24 USB port.<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_MHC_QB3_3Z">
				<li class="li">For <strong class="ph b">Windows OS</strong> :<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_NHC_QB3_3Z">
					<li class="li">for driver installation, steer the New Hardware found wizard to the
									<strong class="ph b">nxp_rndis.inf</strong> driver in &lt;Kinetis Thread Installation,
								for example,
								SDK_2.2_MKW41Z512xxx4\middleware\wireless\framework_5.3.4\SerialManager\Source\USB_VirtualNic\INF\:</li>

				</ul>
</li>

			</ul>
</li>

		</ul>

		<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_B3C_QB3_3Z">
			<li class="li">after driver installation, check the device has been detected as a Network
				Adapter with ID “NXP USB RNDIS” in the Windows Control Panel</li>

		</ul>

		<img class="image" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__IMAGE_UG4_YB3_3Z" src="GUID-01387FBC-A641-4520-8455-D27D8650E9FD-high.png"/>
		<div class="fig fignone" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__FIG_RHL_RB3_3Z"><span class="figcap">Figure 1. NXP USB RNDIS</span>
			
		</div>

		<ul class="ul" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__UL_C4P_5B3_3Z">
			<li class="li">Double click the adapter entry, choose <strong class="ph b">Details</strong>… and check that <strong class="ph b">FD01:</strong> prefix IPv6 addresses have been provisioned to the adapter:</li>

		</ul>

		<img class="image" src="GUID-69793725-203E-4F54-8562-6417296C4811-high.png"/>
		<div class="fig fignone" id="GUID-FE86B437-BF35-43A3-82E9-36BE39949A5E__FIG_VY1_ZB3_3Z"><span class="figcap">Figure 2. Adapter entry</span>
			
		</div>

		<ul class="ul">
			<li class="li">If FD01: addresses are not provisioned, try deselecting any 3rd party options such as Virtual Machine drivers in the interface properties<ul class="ul">
				<li class="li">For most desktop Linux OS variants should already provisioned with RNDIS drivers through the <strong class="ph b">usbnet</strong> modules.</li>

				<li class="li">For <strong class="ph b">MAC OS X</strong> the RNDIS Host drivers at <a class="xref" href="https://github.com/jwise/HoRNDIS" target="_blank">github.com/jwise/HoRNDIS</a> may need to be deployed.<ul class="ul">
					<li class="li">On <strong class="ph b">Node A</strong>, also open a shell on the OpenSDA / OpenLink USB port, to create a new Thread network enter:</li>

				</ul>
</li>

			</ul>
</li>

		</ul>

		<p class="p"><strong class="ph b">$ thr create</strong></p>

		<p class="p">Note the status messages in the shell indicating the network parameters. Note a Commissioner instance also starts on Node A</p>

		<ul class="ul">
			<li class="li">On <strong class="ph b">Node B</strong> shell initiate joining with the default PSKd (<strong class="ph b"><em class="ph i">THREAD</em></strong>):</li>

		</ul>

		<p class="p"><strong class="ph b">$ thr join</strong></p>

		<p class="p">Note the status messages in the shell indicating the joining results. </p>

		<ul class="ul">
			<li class="li">On <strong class="ph b">Node B</strong>, enter the <strong class="ph b">ifconfig</strong> command to view IP address information<strong class="ph b">:</strong></li>

		</ul>

		<p class="p"><strong class="ph b">$ ifconfig</strong></p>

		<p class="p"><strong class="ph b">Interface 0: 6LoWPAN </strong></p>

		<p class="p"><strong class="ph b"> Link local address (LL64): fe80::1885:ba8e:d82a:6fad </strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML64): fd4f:12be:69d2::9c67:fec9:9306:4791 </strong></p>

		<p class="p"><strong class="ph b"> Mesh local address (ML16): fd4f:12be:69d2::ff:fe00:400 </strong></p>

		<p class="p"><strong class="ph b"> Unique local address: fd01::3ead:249f:f277:571a:3109 </strong></p>

		<p class="p"><strong class="ph b"> Link local all Thread Nodes(MCast): ff32:40:fd4f:12be:69d2::01</strong></p>

		<p class="p"><strong class="ph b"> Realm local all Thread Nodes(MCast): ff33:40:fd4f:12be:69d2::01</strong></p>

		<ul class="ul">
			<li class="li">On the <strong class="ph b">Host PC</strong>, launch a terminal window (<strong class="ph b">cmd </strong>on Windows OS) and ping the Unique local address with prefix FD01::3EAD based address of NodeB:</li>

		</ul>

		<p class="p"><strong class="ph b">C:\&gt;ping fd01::3ead:249f:f277:571a:3109 </strong></p>

		<p class="p"><strong class="ph b">Pinging fd01::3ead:249f:f277:571a:3109 with 32 bytes of data:</strong></p>

		<p class="p"><strong class="ph b">Reply from fd01::3ead:249f:f277:571a:3109: time=1024ms </strong></p>

		<p class="p"><strong class="ph b">Reply from fd01::3ead:249f:f277:571a:3109: time=31ms </strong></p>

		<p class="p"><strong class="ph b">Reply from fd01::3ead:249f:f277:571a:3109: time=22ms</strong></p>

		<p class="p">Note applications on the Host PC now have IP layer connectivity to Thread nodes through the border router firmware which assigns Unique Local Addresses (site-local) with prefix FD01:: to all subnets (PC interface and Thread network).</p>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-D4D7209B-AA8D-4DE3-84FB-C14DA0517ED9.html">External routing with Ethernet emulation over USB (RNDIS) on Kinetis KW2xD and USB_KW41Z boards</a></div>
</div>
</div>

</body>
</html>