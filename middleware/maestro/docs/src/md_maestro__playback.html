<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Maestro Audio Framework: Maestro playback example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="new_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Maestro Audio Framework<span id="projectnumber">&#160;v 1.7</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_maestro__playback.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Maestro playback example</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md52"></a> </p>
<h1><a class="anchor" id="autotoc_md53"></a>
Table of content</h1>
<ul>
<li><a class="el" href="#maestro-playback-overview">Overview</a></li>
<li><a class="el" href="#maestro-playback-HW-requirements">Hardware requirements</a></li>
<li><a class="el" href="#maestro-playback-HW-modifications">Hardware modifications</a></li>
<li><a class="el" href="#maestro-playback-preparation">Preparation</a></li>
<li><a class="el" href="#maestro-playback-running-the-demo">Running the demo</a></li>
<li><a class="el" href="#maestro-playback-example-configuration">Example configuration</a></li>
<li><a class="el" href="#maestro-playback-functionality">Functionality</a></li>
<li><a class="el" href="#maestro-playback-states">States</a></li>
<li><a class="el" href="#maestro-playback-commands-in-detail">Commands in detail</a></li>
<li><a class="el" href="#maestro-playback-processing-time">Processing Time</a></li>
</ul>
<h1><a class="anchor" id="maestro-playback-overview"></a>
Overview</h1>
<p>The Maestro playback example demonstrates audio processing on the ARM cortex core utilizing the Maestro Audio Framework library.</p>
<p>The application is controlled by commands from a shell interface using serial console and the audio files are read from the SD card.</p>
<p>Depending on target platform or development board there are different modes and features of the demo supported.</p>
<ul>
<li><b>Standard</b> - The mode demonstrates playback of encoded files from an SD card with up to 2 channels, up to 48 kHz sample rate and up to 16 bit width. This mode is enabled by default.</li>
<li><b>Multi-channel</b> - The mode demonstrates playback of raw PCM files from an SD card with up to 8 channels, 96kHz sample rate and 32 bit width. The decoders and synchronous sample rate converter are not supported in this mode. The Multi-channel mode is only supported on selected platforms, see the table below. The <a class="el" href="#maestro-playback-example-configuration">Example configuration</a> section contains information on how to enable it.</li>
</ul>
<p>As shown in the table below, the application is supported on several development boards and each development board may have certain limitations, some development boards may also require hardware modifications or allow to use of an audio expansion board. Therefore, please check the supported features and <a class="el" href="#maestro-playback-HW-modifications">Hardware modifications</a> or <a class="el" href="#maestro-playback-example-configuration">Example configuration</a> sections before running the demo.</p>
<table class="audio_FW_spec_table">
<tr>
<th colspan="1">Mode </th><th colspan="8">Standard </th><th colspan="1">Multi-channel    </th></tr>
<tr>
<td colspan="1" rowspan="2">Feature </td><td colspan="5">Decoder </td><td colspan="1">Sample rate converter </td><td colspan="2">Audio output [num of channels] </td><td colspan="1">Audio output [num of channels]  </td></tr>
<tr>
<td colspan="1">AAC </td><td colspan="1">FLAC </td><td colspan="1">MP3 </td><td colspan="1">OPUS </td><td colspan="1">WAV </td><td colspan="1">SSRC </td><td colspan="1">On board codec </td><td colspan="1">AUD-EXP-42448 </td><td colspan="1">AUD-EXP-42448  </td></tr>
<tr>
<td colspan="1">EVKC-MIMXRT1060 </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1" class="audio_FW_spec_table_modification">1-2 </td><td colspan="1" class="audio_FW_spec_table_modification">1-8  </td></tr>
<tr>
<td colspan="1">EVKB-MIMXRT1170 </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">LPCXpresso55s69 </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">EVK-MCXN5X </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">OK </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">RW612BGA </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">RW612QFN </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X   </td></tr>
</table>
<ul>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_supported">Dark green</span> - Fully supported and enabled by default.</div></li>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_limited">Orange</span> - Supported with some limitations and enabled by default. See the limitations section below.</div></li>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_modification">Light green</span> - Supported, but only available after some SW or HW modification. More information about modification can be found in the <a class="el" href="#maestro-playback-example-configuration">Example configuration</a> section.</div></li>
<li><div style="font-size:.8em"> <span>X</span> - Not supported.</div></li>
</ul>
<p><b>Limitations:</b></p><ul>
<li>Decoder:<ul>
<li><b>AAC:</b><ul>
<li>The decoder is supported only in the MCUXpresso IDE and ARMGCC.</li>
</ul>
</li>
<li><b>FLAC:</b><ul>
<li><em>LPCXpresso55s69</em> - When playing FLAC audio files with too small frame size (block size), the audio output may be distorted because the board is not fast enough.</li>
</ul>
</li>
<li><b>OPUS:</b><ul>
<li><em>LPCXpresso55s69</em> - The decoder is disabled due to insufficient memory may be distorted because the board is not fast enough.</li>
</ul>
</li>
</ul>
</li>
<li>Sample rate converter:<ul>
<li><b>SSRC:</b><ul>
<li><em>LPCXpresso55s69</em> - When a memory allocation ERROR occurs, it is necessary to disable the SSRC element due to insufficient memory.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>Known issues:</b></p><ul>
<li>Decoder:<ul>
<li><b>MP3:</b><ul>
<li>The decoder has issues with some of the files. One of the channels can be sometimes distorted or missing parts of the signal.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>More information about supported features can be found on the <a class="el" href="md_supported__features.html">Supported features</a> page.</p>
<h1><a class="anchor" id="maestro-playback-HW-requirements"></a>
Hardware requirements</h1>
<ul>
<li>Desired development board</li>
<li>Micro USB cable</li>
<li>Headphones with 3.5 mm stereo jack</li>
<li>SD card with supported audio files</li>
<li>Personal computer</li>
<li>Optional:<ul>
<li>Audio expansion board <a href="https://www.nxp.com/part/AUD-EXP-42448#/">AUD-EXP-42448 (REV B)</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="maestro-playback-HW-modifications"></a>
Hardware modifications</h1>
<p>Some development boards need some hardware modifications to run the application. If the development board is not listed here, its default setting is required.</p><ul>
<li><em>EVKB-MIMXRT1170:</em><ol type="1">
<li>Please remove below resistors if on board wifi chip is not DNP:<ul>
<li>R228, R229, R232, R234</li>
</ul>
</li>
<li>Please make sure R136 is weld for GPIO card detect.</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="maestro-playback-preparation"></a>
Preparation</h1>
<ol type="1">
<li>Connect a micro USB cable between the PC host and the debug USB port on the development board.</li>
<li>Open a serial terminal with the following settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Insert the headphones into the Line-Out connector (headphone jack) on the development board.</li>
<li>Either press the reset button on your development board or launch the debugger in your IDE to begin running the demo.</li>
</ol>
<h1><a class="anchor" id="maestro-playback-running-the-demo"></a>
Running the demo</h1>
<p>When the example runs successfully, you should see similar output on the serial terminal as below:</p>
<div class="fragment"><div class="line">*********************************</div>
<div class="line">Maestro audio playback demo start</div>
<div class="line">*********************************</div>
<div class="line"> </div>
<div class="line">[APP_Main_Task] started</div>
<div class="line"> </div>
<div class="line">Copyright  2022  NXP</div>
<div class="line">[APP_SDCARD_Task] start</div>
<div class="line">[APP_Shell_Task] start</div>
<div class="line"> </div>
<div class="line">&gt;&gt; [APP_SDCARD_Task] SD card drive mounted</div>
</div><!-- fragment --><p>Type <code>help</code> to see the command list. Similar description will be displayed on serial console (<em>If multi-channel playback mode is enabled, the description is slightly different</em>):</p>
<div class="fragment"><div class="line">&gt;&gt; help</div>
<div class="line"> </div>
<div class="line">&quot;help&quot;: List all the registered commands</div>
<div class="line"> </div>
<div class="line">&quot;exit&quot;: Exit program</div>
<div class="line"> </div>
<div class="line">&quot;version&quot;: Display component versions</div>
<div class="line"> </div>
<div class="line">&quot;file&quot;: Perform audio file decode and playback</div>
<div class="line"> </div>
<div class="line">  USAGE: file [stop|pause|volume|seek|play|list|info]</div>
<div class="line">    stop              Stops actual playback.</div>
<div class="line">    pause             Pause actual track or resume if already paused.</div>
<div class="line">    volume &lt;volume&gt;   Set volume. The volume can be set from 0 to 100.</div>
<div class="line">    seek &lt;seek_time&gt;  Seek currently paused track. Seek time is absolute time in milliseconds.</div>
<div class="line">    play &lt;filename&gt;   Select audio track to play.</div>
<div class="line">    list              List audio files available on mounted SD card.</div>
<div class="line">    info              Prints playback info.</div>
</div><!-- fragment --><p> Details of commands can be found <a class="el" href="#maestro-playback-commands-in-detail">here</a>.</p>
<h1><a class="anchor" id="maestro-playback-example-configuration"></a>
Example configuration</h1>
<p>The example can be configured by user. Before configuration, please check the <a class="el" href="#maestro-playback-overview">table</a> to see if the feature is supported on the development board.</p><ul>
<li><b>Enable Multi-channel mode:</b><ul>
<li>Add the <code>MULTICHANNEL_EXAMPLE</code> symbol to preprocessor defines on project level.</li>
<li>Connect AUD-EXP-42448 (see the point below).</li>
</ul>
</li>
<li><b>Connect AUD-EXP-42448:</b><ul>
<li><em>EVKC-MIMXRT1060:</em><ol type="1">
<li>Disconnect the power supply for safety reasons.</li>
<li>Insert AUD-EXP-42448 into J19 to be able to use the CS42448 codec for multichannel output.</li>
<li>Uninstall J99.</li>
<li>Set the <code>DEMO_CODEC_WM8962</code> macro to <code>0</code> in the <code>app_definitions.h</code> file</li>
<li>Set the <code>DEMO_CODEC_CS42448</code> macro to <code>1</code> in the <code>app_definitions.h</code> file.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="maestro-playback-functionality"></a>
Functionality</h1>
<p>The <code>file play &lt;filename&gt;</code> command calls the <code>STREAMER_file_Create</code> or <code>STREAMER_PCM_Create</code> function from the <code>app_streamer.c</code> file depending on the selected mode.</p>
<ul>
<li>When the <em>Standard</em> mode is enabled, the command calls the <code>STREAMER_file_Create</code> function that creates a pipeline with the following elements:<ul>
<li>ELEMENT_FILE_SRC_INDEX</li>
<li>ELEMENT_DECODER_INDEX</li>
<li>ELEMENT_SRC_INDEX (If <code>SSRC_PROC</code> is defined)</li>
<li>ELEMENT_SPEAKER_INDEX</li>
</ul>
</li>
<li>When the <em>Multi-channel</em> mode is enabled, the command calls <code>STREAMER_PCM_Create</code> function, which creates a pipeline with the following elements:<ul>
<li>ELEMENT_FILE_SRC_INDEX (PCM format only)</li>
<li>ELEMENT_SPEAKER_INDEX</li>
<li><em>Note:</em><ul>
<li>If the input file is an 8 channel PCM file, output to all 8 channels is available. The properties of the PCM file are set in the <code>app_streamer.c</code> file using file source properties sent to the streamer:<ul>
<li><code>PROP_FILESRC_SET_SAMPLE_RATE</code> - default value is 96000 [Hz]</li>
<li><code>PROP_FILESRC_SET_NUM_CHANNELS</code> - default value is 8</li>
<li><code>PROP_FILESRC_SET_BIT_WIDTH</code> - default value is 32</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Playback itself can be started with the <code>STREAMER_Start</code> function.</p>
<p>Each of the elements has several properties that can be accessed using the <code>streamer_get_property</code> or <code>streamer_set_property</code> function. These properties allow a user to change the values of the appropriate elements. The list of properties can be found in <code><a class="el" href="streamer__element__properties_8h.html" title="Header for streamer element properties.">streamer_element_properties.h</a></code>. See the example of setting property value in the following piece of code from the <code>app_streamer.c</code> file:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structELEMENT__PROPERTY__T.html">ELEMENT_PROPERTY_T</a> prop;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structEXT__PROCESS__DESC__T.html">EXT_PROCESS_DESC_T</a> ssrc_proc = {SSRC_Proc_Init, SSRC_Proc_Execute, SSRC_Proc_Deinit, &amp;get_app_data()-&gt;proc_args};</div>
<div class="line"> </div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">prop</a> = PROP_SRC_PROC_FUNCPTR;</div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">val</a>  = (uintptr_t)&amp;ssrc_proc;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a>(streamer, 0, prop, <span class="keyword">true</span>) != 0)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">prop</a> = PROP_AUDIOSINK_SET_VOLUME;</div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">val</a>  = volume;</div>
<div class="line"><a class="code hl_function" href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a>(streamer, 0, prop, <span class="keyword">true</span>);</div>
<div class="ttc" id="astreamer__api_8h_html_af0f2ba1e35082e033d66b106438b51e8"><div class="ttname"><a href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a></div><div class="ttdeci">int32_t streamer_set_property(STREAMER_T *streamer, int8_t pipeline_id, ELEMENT_PROPERTY_T prop, bool block)</div><div class="ttdoc">Set element property.</div><div class="ttdef"><b>Definition</b> streamer.c:785</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html">ELEMENT_PROPERTY_T</a></div><div class="ttdoc">Element Property structure.</div><div class="ttdef"><b>Definition</b> streamer_api.h:570</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html_a40dc39f13a8d25b45d19d63498082e10"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">ELEMENT_PROPERTY_T::prop</a></div><div class="ttdeci">uint16_t prop</div><div class="ttdoc">property type</div><div class="ttdef"><b>Definition</b> streamer_api.h:571</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html_ab1013a8983adf70b4cffba4637ad1df8"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">ELEMENT_PROPERTY_T::val</a></div><div class="ttdeci">uintptr_t val</div><div class="ttdoc">property value</div><div class="ttdef"><b>Definition</b> streamer_api.h:572</div></div>
<div class="ttc" id="astructEXT__PROCESS__DESC__T_html"><div class="ttname"><a href="structEXT__PROCESS__DESC__T.html">EXT_PROCESS_DESC_T</a></div><div class="ttdoc">External processing funcion prototypes and arguments.</div><div class="ttdef"><b>Definition</b> streamer_element_properties.h:23</div></div>
</div><!-- fragment --><p>Some of the predefined values can be found in the <code><a class="el" href="streamer__api_8h.html" title="Streamer API header. Public APIs for using the maestro streamer framework.">streamer_api.h</a></code>.</p>
<h1><a class="anchor" id="maestro-playback-states"></a>
States</h1>
<p>The application can be in 3 different states:</p><ul>
<li>Idle</li>
<li>Running</li>
<li>Paused</li>
</ul>
<p>In each state, each command can have a different behavior. For more information, see <a class="el" href="#maestro-playback-commands-in-detail">Commands in detail</a> section.</p>
<h1><a class="anchor" id="maestro-playback-commands-in-detail"></a>
Commands in detail</h1>
<p>The applicatin is controlled by commands from the shell interface and the available commands for the selected mode can be displayed using the <code>help</code> command. Commands are processed in the <code>cmd.c</code> file.</p>
<ul>
<li><a class="el" href="#maestro-playback-help-version">help, version</a></li>
<li><a class="el" href="#file-stop">file stop</a></li>
<li><a class="el" href="#file-pause">file pause</a></li>
<li><a class="el" href="#file-volume-volume">file volume &lt;volume&gt;</a></li>
<li><a class="el" href="#file-seek-seek_time">file seek &lt;seek_time&gt;</a></li>
<li><a class="el" href="#file-play-filename">file play &lt;filename&gt;</a></li>
<li><a class="el" href="#file-list">file list</a></li>
<li><a class="el" href="#file-info">file info</a></li>
</ul>
<p>Legend for diagrams:  <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((State)):::state
    B{Condition}:::condition
    C[Error message]:::error
    D[Process function]:::function  
  </div> </p>
<h2><a class="anchor" id="maestro-playback-help-version"></a>
help, version</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((Idle)):::state --> D[Write help or version]:::function
    B((Running)):::state --> D
    C((Paused)):::state --> D
    D-->E((No state
    change)):::state  
  </div> </p>
<h2><a class="anchor" id="file-stop"></a>
file stop</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state --> B
    C((Running)):::state -->E((Idle)):::state
    D((Paused)):::state -->E  
  </div> </p>
<h2><a class="anchor" id="file-pause"></a>
file pause</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state --> B
    C((Running)):::state -->E((Paused)):::state
    D((Paused)):::state -->F((Running)):::state  
  </div> </p>
<h2><a class="anchor" id="file-volume-volume"></a>
file volume &lt;volume&gt;</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state --> M[Error: Play a track first]:::error
    C((Running)):::state --> G{Volume
    parameter
    empty?}:::condition
    D((Paused)):::state --> G
    G -- Yes -->H[Error: Enter volume parameter]:::error
    G -- No -->I{Volume
    in range?}:::condition
    I -- No -->J[Error: invalid value]:::error
    I -- Yes -->K[Set volume]:::function
    J --> L((No state
    change)):::state
    K --> L
    H--> L  
  </div> </p>
<h2><a class="anchor" id="file-seek-seek_time"></a>
file seek &lt;seek_time&gt;</h2>
<p>The seek argument is only supported in the Standard mode.</p>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state --> E[Error: First select
    an audio track to play]:::error
    E-->B
    C((Running)):::state --> F[Error: First
    pause the track]:::error
    F --> C
    D((Paused)):::state --> G{Seek
    parameter
    empty?}:::condition
    G --No --> H{AAC file?}:::condition
    G --Yes --> I[Error: Enter
    a seek time value]:::error
    I-->N((Paused)):::state;
    H --Yes -->J[Error: The AAC decoder
    does not support
    the seek command]:::error
    J-->N
    H --No -->K{Seek
    parameter
    positive?}:::condition
    K --No -->L[Error: The seek
    time must be
    a positive value]:::error
    L-->N
    K --Yes -->M[Seek the file]:::function
    M-->N  
  </div> </p>
<h2><a class="anchor" id="file-play-filename"></a>
file play &lt;filename&gt;</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    C((Running)):::state --> Z[Error: First stop
    current track]:::error
    D((Paused)):::state --> Z
    B((Idle)):::state --> E{SD Card
    inserted?}:::condition
    E -- No -->F[Error: Insert SD
    card]:::error
    E -- Yes -->G{File
    name
    empty?}:::condition
    G -- Yes -->H[Error: Enter
    file name]:::error
    G -- No -->I{File exists?}:::condition
    I -- No -->O[Error: File
    doesn't exist]:::error
    I -- Yes -->J{Supported
    format?}:::condition
    J -- Yes -->K[Play the track]:::function
    J -- No -->L[Error: Unsupported
    file]:::error
    K -->M((Running)):::state
    L --> W((No state
    change)):::state
    O --> W
    H --> W
    F --> W
    Z --> W  
  </div> </p>
<h2><a class="anchor" id="file-list"></a>
file list</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state --> G{SD Card
    inserted?}:::condition
    C((Running)):::state --> G
    D((Paused)):::state --> G
    G -- Yes -->H[List supported files]:::function
    G -- No -->I[Error: Insert SD card]:::error
    I --> J((No state
    change)):::state
    H --> J  
  </div> </p>
<h2><a class="anchor" id="file-info"></a>
file info</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    B((Idle)):::state -->E[Write file info]:::function
    C((Running)):::state -->E
    D((Paused)):::state -->E
    E --> F((No state
        change)):::state  
  </div> </p>
<h1><a class="anchor" id="maestro-playback-processing-time"></a>
Processing Time</h1>
<p>Typical streamer pipeline execution times and their individual elements for the EVKC-MIMXRT1060 development board are presented in the following tables. The time spent on output buffers is not included in the traversal measurements. However, file reading time is accounted for. In the case of the WAV codec, the audio file was accessed in every pipeline run. Therefore, during each run, the file was read from the SD card. However, for the MP3 codec, where data must be processed in complete MP3 frames, the file was not read in every run. Instead, it was read periodically only when the codec buffer did not contain a complete frame of data.</p>
<p>For further details, please refer to the <a class="el" href="md_processing__time.html">Processing Time</a> document.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">WAV   </th><th class="markdownTableHeadNone">streamer   </th><th class="markdownTableHeadNone">file_src   </th><th class="markdownTableHeadNone">codec   </th><th class="markdownTableHeadNone">SSRC_proc   </th><th class="markdownTableHeadNone">speaker    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">48kHz   </td><td class="markdownTableBodyNone">1.1 ms   </td><td class="markdownTableBodyNone">850 &mu;s   </td><td class="markdownTableBodyNone">150 &mu;s   </td><td class="markdownTableBodyNone">70 &mu;s   </td><td class="markdownTableBodyNone">40 &mu;s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">44kHz   </td><td class="markdownTableBodyNone">1.75 ms   </td><td class="markdownTableBodyNone">850 &mu;s   </td><td class="markdownTableBodyNone">180 &mu;s   </td><td class="markdownTableBodyNone">670 &mu;s   </td><td class="markdownTableBodyNone">40 &mu;s   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MP3   </th><th class="markdownTableHeadNone">streamer   </th><th class="markdownTableHeadNone">file_src   </th><th class="markdownTableHeadNone">codec   </th><th class="markdownTableHeadNone">SSRC_proc   </th><th class="markdownTableHeadNone">speaker    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">48 kHz with file read   </td><td class="markdownTableBodyNone">2.9 ms   </td><td class="markdownTableBodyNone">2.3 &mu;s   </td><td class="markdownTableBodyNone">450 &mu;s   </td><td class="markdownTableBodyNone">60 &mu;s   </td><td class="markdownTableBodyNone">50 &mu;s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">48 kHz without file read   </td><td class="markdownTableBodyNone">0.5 ms   </td><td class="markdownTableBodyNone">x   </td><td class="markdownTableBodyNone">400 &mu;s   </td><td class="markdownTableBodyNone">40 &mu;s   </td><td class="markdownTableBodyNone">40 &mu;s    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">44 kHz with file read   </td><td class="markdownTableBodyNone">3.2 ms   </td><td class="markdownTableBodyNone">2.3 &mu;s   </td><td class="markdownTableBodyNone">440 &mu;s   </td><td class="markdownTableBodyNone">400 &mu;s   </td><td class="markdownTableBodyNone">50 &mu;s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">44 kHz without file read   </td><td class="markdownTableBodyNone">0.9 ms   </td><td class="markdownTableBodyNone">x   </td><td class="markdownTableBodyNone">440 &mu;s   </td><td class="markdownTableBodyNone">390 &mu;s   </td><td class="markdownTableBodyNone">40 &mu;s   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">&copy; 2020 NXP Semiconductors. All rights reserved.
    </li>
  </ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
    },
  });
</script>
</body>
</html>
