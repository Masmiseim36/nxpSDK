<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Maestro Audio Framework: Maestro sync example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="new_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Maestro Audio Framework<span id="projectnumber">&#160;v 1.7</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_maestro__sync.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Maestro sync example</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md60"></a> </p>
<h1><a class="anchor" id="autotoc_md61"></a>
Table of content</h1>
<ul>
<li><a class="el" href="#maestro-sync-overview">Overview</a></li>
<li><a class="el" href="#maestro-sync-HW-requirements">Hardware requirements</a></li>
<li><a class="el" href="#maestro-sync-HW-modifications">Hardware modifications</a></li>
<li><a class="el" href="#maestro-sync-preparation">Preparation</a></li>
<li><a class="el" href="#maestro-sync-running-the-demo">Running the demo</a></li>
<li><a class="el" href="#maestro-sync-example-configuration">Example configuration</a></li>
<li><a class="el" href="#maestro-sync-functionality">Functionality</a></li>
<li><a class="el" href="#maestro-sync-states">States</a></li>
<li><a class="el" href="#maestro-sync-commands-in-detail">Commands in detail</a></li>
</ul>
<h1><a class="anchor" id="maestro-sync-overview"></a>
Overview</h1>
<p>The Maestro sync example demonstrates the use of synchronous pipelines (Tx and Rx in this case) processing in a single streamer task on the ARM cortex core utilizing the Maestro Audio Framework library.</p>
<p>The application is controlled by commands from a shell interface using serial console.</p>
<p>The feature is useful for testing the latency of the pipeline or implementing algorithms requiring reference signals such as echo cancellation. The VoiceSeeker library available in this example is not featuring AEC (Acoustic Echo Cancellation), but NXP is offering it in the premium version of the library. More information about the premium version can be found at <a href="https:\\www.nxp.com\voiceseeker">VoiceSeeker</a> page. The demo uses two pipelines running synchronously in a single streamer task:</p><ol type="1">
<li>Playback (Tx) pipeline:<ul>
<li>Playback of audio data in PCM format stored in flash memory to the audio Line-Out connector (speaker).</li>
</ul>
</li>
<li>Recording (Rx) pipline:<ul>
<li>Record audio data using a microphone.</li>
<li>VoiceSeeker processing.</li>
<li>Wake words + voice commands recognition.</li>
<li>Save the VoiceSeeker output to the voiceseeker_output.pcm file on the SD card.</li>
</ul>
</li>
</ol>
<p>As shown in the table below, the application is supported on several development boards, and each development board may have certain limitations, some development boards may also require hardware modifications or allow to use of an audio expansion board. Therefore, please check the supported features and <a class="el" href="#maestro-sync-HW-modifications">Hardware modifications</a> or <a class="el" href="#maestro-sync-example-configuration">Example configuration</a> sections before running the demo.</p>
<table class="audio_FW_spec_table">
<tr>
<th colspan="1">Mode </th><th colspan="7">Standard    </th></tr>
<tr>
<td colspan="1" rowspan="2">Feature </td><td colspan="3">Audio inputs [num of channels] </td><td colspan="2">Audio outputs [num of channels] </td><td colspan="2">Additional libraries  </td></tr>
<tr>
<td colspan="1">On board codec </td><td colspan="1">DMICs </td><td colspan="1">aud-exp-42448 </td><td colspan="1">On board codec </td><td colspan="1">aud-exp-42448 </td><td colspan="1">VIT </td><td colspan="1">VoiceSeeker  </td></tr>
<tr>
<td colspan="1">EVKC-MIMXRT1060 </td><td colspan="1" class="audio_FW_spec_table_supported">1 </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_supported">1 </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_limited">OK  </td></tr>
<tr>
<td colspan="1">EVKB-MIMXRT1170 </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_supported">1-2 </td><td colspan="1">X </td><td colspan="1" class="audio_FW_spec_table_limited">OK </td><td colspan="1" class="audio_FW_spec_table_limited">OK  </td></tr>
<tr>
<td colspan="1">LPCXpresso55s69 </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">EVK-MCXN5XX </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">RW612BGA </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X  </td></tr>
<tr>
<td colspan="1">RW612QFN </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X </td><td colspan="1">X   </td></tr>
</table>
<ul>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_supported">Dark green</span> - Fully supported and enabled by default.</div></li>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_limited">Orange</span> - Supported with some limitations and enabled by default. See the limitations section below.</div></li>
<li><div style="font-size:.8em"> <span class="audio_FW_spec_table_modification">Light green</span> - Supported, but only available after some SW or HW modification. More information about modification can be found in the <a class="el" href="md_maestro__record.html#maestro-record-example-configuration">Example configuration</a> section.</div></li>
<li><div style="font-size:.8em"> <span>X</span> - Not supported.</div></li>
</ul>
<p><b>Limitations:</b></p><ul>
<li>Addition labraries<ul>
<li><b>VIT:</b><ul>
<li>The VIT is supported only in the MCUXpresso IDE.</li>
</ul>
</li>
<li><b>VoiceSeeker:</b><ul>
<li>The VoiceSeeker is supported only in the MCUXpresso IDE.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>Known issues:</b></p><ul>
<li>No known issues.</li>
</ul>
<p>More information about supported features can be found on the <a class="el" href="md_supported__features.html">Supported features</a> page.</p>
<h1><a class="anchor" id="maestro-sync-HW-requirements"></a>
Hardware requirements</h1>
<ul>
<li>Desired development board</li>
<li>Micro USB cable</li>
<li>Speaker with 3.5 mm stereo jack</li>
<li>Personal computer</li>
<li>Optional:<ul>
<li>SD card for file output</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="maestro-sync-HW-modifications"></a>
Hardware modifications</h1>
<p>Some development boards need some hardware modifications to run the application. If the development board is not listed here, its default setting is required.</p><ul>
<li><em>EVKC-MIMXRT1060:</em><ol type="1">
<li>Please make sure resistors below are removed to be able to use SD-Card.<ul>
<li>R368, R347, R349, R365, R363</li>
</ul>
</li>
<li>Please Make sure J99 is installed.</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="maestro-sync-preparation"></a>
Preparation</h1>
<ol type="1">
<li>Connect a micro USB cable between the PC host and the debug USB port on the development board</li>
<li>Open a serial terminal with the following settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Insert the speaker into the Line-Out connector (headphone jack) on the development board.</li>
<li><em>Optional:</em> Insert an SD card into the SD card slot to record to the VoiceSeeker output.</li>
<li>Either press the reset button on your development board or launch the debugger in your IDE to begin running the demo.</li>
</ol>
<h1><a class="anchor" id="maestro-sync-running-the-demo"></a>
Running the demo</h1>
<p>When the example runs successfully, you should see similar output on the serial terminal as below: </p><div class="fragment"><div class="line">*****************************</div>
<div class="line">Maestro audio sync demo start</div>
<div class="line">*****************************</div>
<div class="line"> </div>
<div class="line">Copyright  2022  NXP</div>
<div class="line">[APP_SDCARD_Task] start</div>
<div class="line">[APP_Shell_Task] start</div>
<div class="line"> </div>
<div class="line">&gt;&gt; [APP_SDCARD_Task] SD card drive mounted</div>
</div><!-- fragment --><p>Type <code>help</code> to see the command list. Similar description will be displayed on serial console:</p>
<div class="fragment"><div class="line">&gt;&gt; help</div>
<div class="line"> </div>
<div class="line">&quot;help&quot;: List all the registered commands</div>
<div class="line"> </div>
<div class="line">&quot;exit&quot;: Exit program</div>
<div class="line"> </div>
<div class="line">&quot;version&quot;: Display component versions</div>
<div class="line"> </div>
<div class="line">&quot;start [nosdcard]&quot;: Starts a streamer task.</div>
<div class="line">              - Initializes the streamer with the Memory-&gt;Speaker pipeline and with</div>
<div class="line">                the Microphone-&gt;VoiceSeeker-&gt;VIT-&gt;SDcard pipeline.</div>
<div class="line">              - Runs repeatedly until stop command.</div>
<div class="line">     nosdcard - Doesn&#39;t use SD card to store data.</div>
<div class="line"> </div>
<div class="line">&quot;stop&quot;: Stops a running streamer:</div>
<div class="line"> </div>
<div class="line">&quot;debug [on|off]&quot;: Starts / stops debugging.</div>
<div class="line">                - Starts / stops saving VoiceSeeker input data (reference and microphone data)</div>
<div class="line">                  to SDRAM.</div>
<div class="line">                - After the stop command, this data is transferred to the SD card.</div>
</div><!-- fragment --><p> Details of commands can be found here.</p>
<h1><a class="anchor" id="maestro-sync-example-configuration"></a>
Example configuration</h1>
<p>The example can be configured by user. Before configuration, please check the <a class="el" href="#maestro-sync-overview">table</a> to see if the feature is supported on the development board.</p><ul>
<li><b>Enable the premium version of VoiceSeeker:</b><ul>
<li>The premium version of the VoiceSeeker library with AEC is API compatible with this example.</li>
<li>To get the premium version, please visit <a href="https:\\www.nxp.com\voiceseeker">VoiceSeeker</a> page.</li>
<li>The following steps are required to run this example with the VoiceSeeker&amp;AEC library.<ul>
<li>Link the <code>voiceseeker.a</code> library instead of <code>voiceseeker_no_aec.a</code>.</li>
<li>Set the <code>RDSP_ENABLE_AEC</code> definition to <code>1U</code> in the <code>voiceseeker.h</code> file</li>
</ul>
</li>
</ul>
</li>
<li><b>VIT model generation:</b><ul>
<li>For custom VIT model generation (defining own wake words and voice commands) please use <a href="https://vit.nxp.com/">https://vit.nxp.com/</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="maestro-sync-functionality"></a>
Functionality</h1>
<p>The <code>start &lt;nosdcard&gt;</code> command calls the <code>STREAMER_Create</code> function from the <code>app_streamer.c</code> file that creates pipelines with the following elements:</p><ul>
<li>Playback pipeline:<ul>
<li>ELEMENT_MEM_SRC_INDEX</li>
<li>ELEMENT_SPEAKER_INDEX</li>
</ul>
</li>
<li>Record pipeline:<ul>
<li>ELEMENT_MICROPHONE_INDEX</li>
<li>ELEMENT_VOICESEEKER_INDEX</li>
<li>ELEMENT_VIT_PROC_INDEX</li>
<li>ELEMENT_FILE_SINK_INDEX (If the <code>nosdcard</code> argument is not used)</li>
</ul>
</li>
</ul>
<p>Processing itself can be started with the <code>STREAMER_Start</code> function.</p>
<p>Each of the elements has several properties that can be accessed using the <code>streamer_get_property</code> or <code>streamer_set_property</code> function. These properties allow a user to change the values of the appropriate elements. The list of properties can be found in <code><a class="el" href="streamer__element__properties_8h.html" title="Header for streamer element properties.">streamer_element_properties.h</a></code>. See the example of setting property value in the following piece of code from the <code>app_streamer.c</code> file:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structELEMENT__PROPERTY__T.html">ELEMENT_PROPERTY_T</a> prop;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structMEMSRC__SET__BUFFER__T.html">MEMSRC_SET_BUFFER_T</a> buf;</div>
<div class="line">buf.<a class="code hl_variable" href="structMEMSRC__SET__BUFFER__T.html#af5034b95498a50997d51725187f1ea32">location</a> = (int8_t *)TESTAUDIO_DATA;</div>
<div class="line">buf.<a class="code hl_variable" href="structMEMSRC__SET__BUFFER__T.html#a511ef464553b30a72af8f056929597b9">size</a>     = TESTAUDIO_LEN;</div>
<div class="line"> </div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">prop</a> = PROP_MEMSRC_SET_BUFF;</div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">val</a>  = (uintptr_t)&amp;buf;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="streamer__api_8h.html#a74945267775b0a00cf3a7b9d1ab93896a0e92107b1794810ee28eee41ed635924">STREAM_OK</a> != <a class="code hl_function" href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a>(handle-&gt;streamer, 0, prop, <span class="keyword">true</span>))</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> kStatus_Fail;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">prop</a> = PROP_MEMSRC_SET_MEM_TYPE;</div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">val</a>  = <a class="code hl_define" href="streamer__api_8h.html#ac139bede02cf10a641fa8a11fcb5b120">AUDIO_DATA</a>;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="streamer__api_8h.html#a74945267775b0a00cf3a7b9d1ab93896a0e92107b1794810ee28eee41ed635924">STREAM_OK</a> != <a class="code hl_function" href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a>(handle-&gt;streamer, 0, prop, <span class="keyword">true</span>))</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> kStatus_Fail;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">prop</a> = PROP_MEMSRC_SET_SAMPLE_RATE;</div>
<div class="line">prop.<a class="code hl_variable" href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">val</a>  = DEMO_SAMPLE_RATE;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="streamer__api_8h.html#a74945267775b0a00cf3a7b9d1ab93896a0e92107b1794810ee28eee41ed635924">STREAM_OK</a> != <a class="code hl_function" href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a>(handle-&gt;streamer, 0, prop, <span class="keyword">true</span>))</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> kStatus_Fail;</div>
<div class="line">}</div>
<div class="ttc" id="astreamer__api_8h_html_a74945267775b0a00cf3a7b9d1ab93896a0e92107b1794810ee28eee41ed635924"><div class="ttname"><a href="streamer__api_8h.html#a74945267775b0a00cf3a7b9d1ab93896a0e92107b1794810ee28eee41ed635924">STREAM_OK</a></div><div class="ttdeci">@ STREAM_OK</div><div class="ttdoc">General success.</div><div class="ttdef"><b>Definition</b> streamer_api.h:150</div></div>
<div class="ttc" id="astreamer__api_8h_html_ac139bede02cf10a641fa8a11fcb5b120"><div class="ttname"><a href="streamer__api_8h.html#ac139bede02cf10a641fa8a11fcb5b120">AUDIO_DATA</a></div><div class="ttdeci">#define AUDIO_DATA</div><div class="ttdoc">Audio data.</div><div class="ttdef"><b>Definition</b> streamer_api.h:127</div></div>
<div class="ttc" id="astreamer__api_8h_html_af0f2ba1e35082e033d66b106438b51e8"><div class="ttname"><a href="streamer__api_8h.html#af0f2ba1e35082e033d66b106438b51e8">streamer_set_property</a></div><div class="ttdeci">int32_t streamer_set_property(STREAMER_T *streamer, int8_t pipeline_id, ELEMENT_PROPERTY_T prop, bool block)</div><div class="ttdoc">Set element property.</div><div class="ttdef"><b>Definition</b> streamer.c:785</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html">ELEMENT_PROPERTY_T</a></div><div class="ttdoc">Element Property structure.</div><div class="ttdef"><b>Definition</b> streamer_api.h:570</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html_a40dc39f13a8d25b45d19d63498082e10"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html#a40dc39f13a8d25b45d19d63498082e10">ELEMENT_PROPERTY_T::prop</a></div><div class="ttdeci">uint16_t prop</div><div class="ttdoc">property type</div><div class="ttdef"><b>Definition</b> streamer_api.h:571</div></div>
<div class="ttc" id="astructELEMENT__PROPERTY__T_html_ab1013a8983adf70b4cffba4637ad1df8"><div class="ttname"><a href="structELEMENT__PROPERTY__T.html#ab1013a8983adf70b4cffba4637ad1df8">ELEMENT_PROPERTY_T::val</a></div><div class="ttdeci">uintptr_t val</div><div class="ttdoc">property value</div><div class="ttdef"><b>Definition</b> streamer_api.h:572</div></div>
<div class="ttc" id="astructMEMSRC__SET__BUFFER__T_html"><div class="ttname"><a href="structMEMSRC__SET__BUFFER__T.html">MEMSRC_SET_BUFFER_T</a></div><div class="ttdef"><b>Definition</b> streamer_element_properties.h:182</div></div>
<div class="ttc" id="astructMEMSRC__SET__BUFFER__T_html_a511ef464553b30a72af8f056929597b9"><div class="ttname"><a href="structMEMSRC__SET__BUFFER__T.html#a511ef464553b30a72af8f056929597b9">MEMSRC_SET_BUFFER_T::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Buffer size.</div><div class="ttdef"><b>Definition</b> streamer_element_properties.h:184</div></div>
<div class="ttc" id="astructMEMSRC__SET__BUFFER__T_html_af5034b95498a50997d51725187f1ea32"><div class="ttname"><a href="structMEMSRC__SET__BUFFER__T.html#af5034b95498a50997d51725187f1ea32">MEMSRC_SET_BUFFER_T::location</a></div><div class="ttdeci">int8_t * location</div><div class="ttdoc">Buffer pointer.</div><div class="ttdef"><b>Definition</b> streamer_element_properties.h:183</div></div>
</div><!-- fragment --><p> Some of the predefined values can be found in the <code><a class="el" href="streamer__api_8h.html" title="Streamer API header. Public APIs for using the maestro streamer framework.">streamer_api.h</a></code>.</p>
<h1><a class="anchor" id="maestro-sync-states"></a>
States</h1>
<p>The application can be in 2 different states:</p><ul>
<li>Idle</li>
<li>Running</li>
</ul>
<h1><a class="anchor" id="maestro-sync-commands-in-detail"></a>
Commands in detail</h1>
<ul>
<li><a class="el" href="#maestro-sync-help-version">help, version</a></li>
<li><a class="el" href="#maestro-sync-start">start [nosdcard]</a></li>
<li><a class="el" href="#maestro-sync-stop">stop</a></li>
<li><a class="el" href="#maestro-sync-debug-on-off">debug [on|off]</a></li>
</ul>
<p>Legend for diagrams:  <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((State)):::state
    B{Condition}:::condition
    C[Error message]:::error
    D[Process function]:::function  
  </div> </p>
<h2><a class="anchor" id="maestro-sync-help-version"></a>
help, version</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((Idle)):::state --> C[Write help or version]:::function
    B((Running)):::state --> C
    C --> E((No state
    change)):::state  
  </div> </p>
<h2><a class="anchor" id="maestro-sync-start"></a>
start [nosdcard]</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((Idle)):::state --> B{nosdcard
    parameter?}:::condition
    B -- Yes --> CH[Playing to Line-out and
    recording]:::function
    CH --> L((Running)):::state
    B -- No --> C{Is SD card
    inserted?}:::condition
    C -- Yes --> E[Playing to Line-out and
    recording to SD card]:::function
    E --> F((Running)):::state
    F --> G{Debugging
    is enabled?}:::condition
    G -- No --> F
    G -- Yes --> H[Save reference and
    microphone data to SDRAM]:::function
    H --> F
    C -- No --> D[Error: Insert SD
card first]:::error
    D --> A
    J((Running)):::state --> K[Error: The streamer task is
    already running]:::error
    K --> J  
  </div> </p>
<h2><a class="anchor" id="maestro-sync-stop"></a>
stop</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((Idle)):::state --> A
    B((Running)):::state --> C{Is debugging
    enabled?}:::condition
    C --Yes -->E[Copy reference and
microphone data to
the SD card]:::function
    E --> G((Idle)):::state
    C -- No --> G  
  </div> </p>
<h2><a class="anchor" id="maestro-sync-debug-on-off"></a>
debug [on|off]</h2>
<p> <div class="mermaid"> 
   flowchart TD
    classDef function fill:#c6d22c
    classDef condition fill:#7cb2de
    classDef state fill:#fcb415
    classDef error fill:#FF999C

    A((Idle)):::state --> B[Error: First, start
    the streamer task]:::error
    C((Running)):::state --> D{Any
    parameter?}:::condition
    D -- Yes --> F{Started with
    nosdcard
    parameter?}:::condition
    F -- No --> H[Set debugging]:::function
    H --> C
    F --Yes --> G[Error: Debugging cannot be used]:::error
    G --> C
    D -- No --> E[Error: Use the parameter
    either on or off]:::error
    E --> C  
  </div>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">&copy; 2020 NXP Semiconductors. All rights reserved.
    </li>
  </ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
    },
  });
</script>
</body>
</html>
